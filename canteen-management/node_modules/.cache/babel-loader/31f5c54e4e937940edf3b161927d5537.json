{"ast":null,"code":"var PersistedDataFactory = function () {\n  function PersistedDataFactory() {}\n  PersistedDataFactory.createDefault = function () {\n    return {\n      hasPermission: false,\n      lastUsedCameraId: null\n    };\n  };\n  return PersistedDataFactory;\n}();\nvar PersistedDataManager = function () {\n  function PersistedDataManager() {\n    this.data = PersistedDataFactory.createDefault();\n    var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n    if (!data) {\n      this.reset();\n    } else {\n      this.data = JSON.parse(data);\n    }\n  }\n  PersistedDataManager.prototype.hasCameraPermissions = function () {\n    return this.data.hasPermission;\n  };\n  PersistedDataManager.prototype.getLastUsedCameraId = function () {\n    return this.data.lastUsedCameraId;\n  };\n  PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n    this.data.hasPermission = hasPermission;\n    this.flush();\n  };\n  PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n    this.data.lastUsedCameraId = lastUsedCameraId;\n    this.flush();\n  };\n  PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n    this.data.lastUsedCameraId = null;\n    this.flush();\n  };\n  PersistedDataManager.prototype.reset = function () {\n    this.data = PersistedDataFactory.createDefault();\n    this.flush();\n  };\n  PersistedDataManager.prototype.flush = function () {\n    localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n  };\n  PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n  return PersistedDataManager;\n}();\nexport { PersistedDataManager };","map":{"version":3,"sources":["../../src/storage.ts"],"names":[],"mappings":"AAeA,IAAA,oBAAA,GAAA,YAAA;EAAA,SAAA,oBAAA,CAAA,EAAA,CAOA;EANW,oBAAA,CAAA,aAAa,GAApB,YAAA;IACI,OAAO;MACH,aAAa,EAAE,KAAK;MACpB,gBAAgB,EAAE;KACrB;EACL,CAAC;EACL,OAAA,oBAAC;AAAD,CAAC,CAAA,CAAA;AAED,IAAA,oBAAA,GAAA,YAAA;EAKI,SAAA,oBAAA,CAAA,EAAA;IAHQ,IAAA,CAAA,IAAI,GAAkB,oBAAoB,CAAC,aAAa,CAAA,CAAE;IAI9D,IAAI,IAAI,GAAG,YAAY,CAAC,OAAO,CAAC,oBAAoB,CAAC,iBAAiB,CAAC;IACvE,IAAI,CAAC,IAAI,EAAE;MACP,IAAI,CAAC,KAAK,CAAA,CAAE;KACf,MAAM;MACH,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;IAC/B;EACL;EAEO,oBAAA,CAAA,SAAA,CAAA,oBAAoB,GAA3B,YAAA;IACI,OAAO,IAAI,CAAC,IAAI,CAAC,aAAa;EAClC,CAAC;EAEM,oBAAA,CAAA,SAAA,CAAA,mBAAmB,GAA1B,YAAA;IACI,OAAO,IAAI,CAAC,IAAI,CAAC,gBAAgB;EACrC,CAAC;EAEM,oBAAA,CAAA,SAAA,CAAA,gBAAgB,GAAvB,UAAwB,aAAsB,EAAA;IAC1C,IAAI,CAAC,IAAI,CAAC,aAAa,GAAG,aAAa;IACvC,IAAI,CAAC,KAAK,CAAA,CAAE;EAChB,CAAC;EAEM,oBAAA,CAAA,SAAA,CAAA,mBAAmB,GAA1B,UAA2B,gBAAwB,EAAA;IAC/C,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,gBAAgB;IAC7C,IAAI,CAAC,KAAK,CAAA,CAAE;EAChB,CAAC;EAEM,oBAAA,CAAA,SAAA,CAAA,qBAAqB,GAA5B,YAAA;IACI,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,IAAI;IACjC,IAAI,CAAC,KAAK,CAAA,CAAE;EAChB,CAAC;EAEM,oBAAA,CAAA,SAAA,CAAA,KAAK,GAAZ,YAAA;IACI,IAAI,CAAC,IAAI,GAAG,oBAAoB,CAAC,aAAa,CAAA,CAAE;IAChD,IAAI,CAAC,KAAK,CAAA,CAAE;EAChB,CAAC;EAEO,oBAAA,CAAA,SAAA,CAAA,KAAK,GAAb,YAAA;IACI,YAAY,CAAC,OAAO,CAChB,oBAAoB,CAAC,iBAAiB,EACtC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAClC,CAAC;EA3Cc,oBAAA,CAAA,iBAAiB,GAAW,mBAAmB;EA4ClE,OAAA,oBAAC;CAAA,CAAA,CAAA;SA/CY,oBAAoB","sourceRoot":"","sourcesContent":["var PersistedDataFactory = (function () {\n    function PersistedDataFactory() {\n    }\n    PersistedDataFactory.createDefault = function () {\n        return {\n            hasPermission: false,\n            lastUsedCameraId: null\n        };\n    };\n    return PersistedDataFactory;\n}());\nvar PersistedDataManager = (function () {\n    function PersistedDataManager() {\n        this.data = PersistedDataFactory.createDefault();\n        var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n        if (!data) {\n            this.reset();\n        }\n        else {\n            this.data = JSON.parse(data);\n        }\n    }\n    PersistedDataManager.prototype.hasCameraPermissions = function () {\n        return this.data.hasPermission;\n    };\n    PersistedDataManager.prototype.getLastUsedCameraId = function () {\n        return this.data.lastUsedCameraId;\n    };\n    PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n        this.data.hasPermission = hasPermission;\n        this.flush();\n    };\n    PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n        this.data.lastUsedCameraId = lastUsedCameraId;\n        this.flush();\n    };\n    PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n        this.data.lastUsedCameraId = null;\n        this.flush();\n    };\n    PersistedDataManager.prototype.reset = function () {\n        this.data = PersistedDataFactory.createDefault();\n        this.flush();\n    };\n    PersistedDataManager.prototype.flush = function () {\n        localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n    };\n    PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n    return PersistedDataManager;\n}());\nexport { PersistedDataManager };\n//# sourceMappingURL=storage.js.map"]},"metadata":{},"sourceType":"module"}