{"ast":null,"code":"// QR code detection using jsqrcode library\nconst detectQRCode = imageData => {\n  return new Promise(resolve => {\n    try {\n      // Create a grayscale image array\n      const grayscaleData = new Uint8Array(imageData.width * imageData.height);\n      for (let i = 0; i < imageData.data.length; i += 4) {\n        // Convert RGB to grayscale using luminosity method\n        const gray = 0.299 * imageData.data[i] + 0.587 * imageData.data[i + 1] + 0.114 * imageData.data[i + 2];\n        grayscaleData[i / 4] = gray;\n      }\n\n      // Set up QR code detector\n      window.qrcode.callback = result => {\n        if (result === 'error decoding QR Code') {\n          resolve(null);\n        } else {\n          resolve(result);\n        }\n      };\n\n      // Create a temporary canvas to hold the image\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      canvas.width = imageData.width;\n      canvas.height = imageData.height;\n\n      // Put the image data back\n      ctx.putImageData(imageData, 0, 0);\n\n      // Convert canvas to data URL and decode\n      window.qrcode.decode(canvas.toDataURL());\n    } catch (error) {\n      console.error('QR detection error:', error);\n      resolve(null);\n    }\n  });\n};\nexport { detectQRCode };","map":{"version":3,"names":["detectQRCode","imageData","Promise","resolve","grayscaleData","Uint8Array","width","height","i","data","length","gray","window","qrcode","callback","result","canvas","document","createElement","ctx","getContext","putImageData","decode","toDataURL","error","console"],"sources":["C:/Users/default.LAPTOP-PTJLTSGT/OneDrive/Documents/dt/canteen-management/src/utils/qrDetector.js"],"sourcesContent":["// QR code detection using jsqrcode library\nconst detectQRCode = (imageData) => {\n  return new Promise((resolve) => {\n    try {\n      // Create a grayscale image array\n      const grayscaleData = new Uint8Array(imageData.width * imageData.height);\n      for (let i = 0; i < imageData.data.length; i += 4) {\n        // Convert RGB to grayscale using luminosity method\n        const gray = 0.299 * imageData.data[i] + \n                    0.587 * imageData.data[i + 1] + \n                    0.114 * imageData.data[i + 2];\n        grayscaleData[i / 4] = gray;\n      }\n\n      // Set up QR code detector\n      window.qrcode.callback = (result) => {\n        if (result === 'error decoding QR Code') {\n          resolve(null);\n        } else {\n          resolve(result);\n        }\n      };\n\n      // Create a temporary canvas to hold the image\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      canvas.width = imageData.width;\n      canvas.height = imageData.height;\n      \n      // Put the image data back\n      ctx.putImageData(imageData, 0, 0);\n      \n      // Convert canvas to data URL and decode\n      window.qrcode.decode(canvas.toDataURL());\n    } catch (error) {\n      console.error('QR detection error:', error);\n      resolve(null);\n    }\n  });\n};\n\nexport { detectQRCode };\n"],"mappings":"AAAA;AACA,MAAMA,YAAY,GAAIC,SAAS,IAAK;EAClC,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;IAC9B,IAAI;MACF;MACA,MAAMC,aAAa,GAAG,IAAIC,UAAU,CAACJ,SAAS,CAACK,KAAK,GAAGL,SAAS,CAACM,MAAM,CAAC;MACxE,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,SAAS,CAACQ,IAAI,CAACC,MAAM,EAAEF,CAAC,IAAI,CAAC,EAAE;QACjD;QACA,MAAMG,IAAI,GAAG,KAAK,GAAGV,SAAS,CAACQ,IAAI,CAACD,CAAC,CAAC,GAC1B,KAAK,GAAGP,SAAS,CAACQ,IAAI,CAACD,CAAC,GAAG,CAAC,CAAC,GAC7B,KAAK,GAAGP,SAAS,CAACQ,IAAI,CAACD,CAAC,GAAG,CAAC,CAAC;QACzCJ,aAAa,CAACI,CAAC,GAAG,CAAC,CAAC,GAAGG,IAAI;MAC7B;;MAEA;MACAC,MAAM,CAACC,MAAM,CAACC,QAAQ,GAAIC,MAAM,IAAK;QACnC,IAAIA,MAAM,KAAK,wBAAwB,EAAE;UACvCZ,OAAO,CAAC,IAAI,CAAC;QACf,CAAC,MAAM;UACLA,OAAO,CAACY,MAAM,CAAC;QACjB;MACF,CAAC;;MAED;MACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/C,MAAMC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;MACnCJ,MAAM,CAACV,KAAK,GAAGL,SAAS,CAACK,KAAK;MAC9BU,MAAM,CAACT,MAAM,GAAGN,SAAS,CAACM,MAAM;;MAEhC;MACAY,GAAG,CAACE,YAAY,CAACpB,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC;;MAEjC;MACAW,MAAM,CAACC,MAAM,CAACS,MAAM,CAACN,MAAM,CAACO,SAAS,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3CrB,OAAO,CAAC,IAAI,CAAC;IACf;EACF,CAAC,CAAC;AACJ,CAAC;AAED,SAASH,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}